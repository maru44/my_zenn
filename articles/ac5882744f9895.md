---
title: "ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³ã¨SRP(å˜ä¸€è²¬ä»»ã®åŸå‰‡)"
emoji: "ğŸ¦"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["go", "ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£", "ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£", "solid"]
published: false
---

# ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³

ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«å‰‡ã‚Šä½œã‚‰ã‚ŒãŸè‡ªåˆ†ã®å€‹äººé–‹ç™ºã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãŒ SRP ã‚’æº€ãŸã—ã¦ã„ã‚‹ã®ã‹ä¸å®‰ã«ãªã‚Šã€ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³ã‚’æ›¸ãã“ã¨ã«ã—ã¾ã—ãŸã€‚ãã®éš›ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç”¨ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³ã‚’æ€ã„ã¤ã„ãŸã®ã§å…±æœ‰ã„ãŸã—ã¾ã™ã€‚
ä»¥é™ã“ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç”¨ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³ã‚’ã‚¢ã‚¯ã‚¿ãƒ¼å›³ã¨å‘¼ã¶ã“ã¨ã«ã—ã¾ã™ã€‚
ãŠãã‚‰ãä»–ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç­‰ã§ã‚‚æµç”¨å¯èƒ½ã ã¨æ€ã†ã®ã§ã€æ°—ã«å…¥ã£ãŸã‚‰æ˜¯éä½¿ã£ã¦ã¿ã¦ãã ã•ã„ã€‚
ã‚µãƒ³ãƒ—ãƒ«ã® drawio ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã“ã¡ã‚‰ã§ã™ã€‚
@TODO ãƒ•ã‚¡ã‚¤ãƒ«ã® github url

# å˜ä¸€è²¬ä»»ã®åŸå‰‡ã¨ã¯

å˜ä¸€è²¬ä»»ã®åŸå‰‡ã¨ã¯ä½•ã‹ï¼Ÿ
è‰²ã€…ãªè¨€ã‚ã‚Œæ–¹ã‚’ã—ã¾ã™ã€‚
**ä¸€ã¤ã®é–¢æ•°ã¯ãŸã£ãŸä¸€ã¤ã®ã“ã¨ã‚’è¡Œã†ã¹ã**
**ã‚¯ãƒ©ã‚¹ãŒæ‹…ã†è²¬ä»»ã¯ã€ãŸã£ãŸä¸€ã¤ã«é™å®šã™ã¹ã**
ç­‰
ã“ã‚Œã‚‰ã‚’è¨€ã„æ›ãˆã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¨€ãˆã¾ã™ã€‚
**ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å¤‰æ›´ã™ã‚‹ç†ç”±ã¯ãŸã£ãŸä¸€ã¤ã§ã‚ã‚‹ã¹ã**
ã“ã“ã§æ¯åº¦ãŠãªã˜ã¿ã®ãƒœãƒ–ãŠã˜ã•ã‚“ãŒä»¥ä¸‹ã®ã‚ˆã†ã«è£œè¶³ã—ã¾ã™ã€‚
ã€Œã‚·ã‚¹ãƒ†ãƒ ã®å¤‰æ›´ã£ã¦ã®ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’æº€è¶³ã•ã›ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã—ã‚‡ï¼Ÿãã‚Œã£ã¦ã¤ã¾ã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼è‡ªä½“ãŒ SRP ã®æŒ‡ã—ç¤ºã™ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å¤‰æ›´ã™ã‚‹ç†ç”±ãªã‚“ã˜ã‚ƒãªã„ï¼Ÿã€
ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã®ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ã‚¢ã‚¯ã‚¿ãƒ¼ã¨å‘¼ç§°ã—ãŸã¨ãã«ã“ã‚Œã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¨€ã„æ›ãˆã‚‰ã‚Œã‚‹ã‚“ã˜ã‚ƒãªã„ï¼Ÿã€
**ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ãŸã£ãŸä¸€ã¤ã®ã‚¢ã‚¯ã‚¿ãƒ¼ã«å¯¾ã—ã¦è²¬å‹™ã‚’è² ã†ã¹ãã§ã‚ã‚‹ã€‚**
ãªã‚‹ã»ã©ã€‚å®Œå…¨ã«åˆã£ã¦ã„ã‚‹ã‹ã¯ã‚ã‹ã‚Šã¾ã›ã‚“ãŒã€ä¸€ç†ã‚ã‚Šãã†ã§ã™ã­ã€‚

ä»¥ä¸‹ã“ã®è¨˜äº‹ã§ã¯å˜ä¸€è²¬ä»»åŸå‰‡ã®å®šç¾©ã‚’
**ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ãŸã£ãŸä¸€ã¤ã®ã‚¢ã‚¯ã‚¿ãƒ¼ã«å¯¾ã—ã¦è²¬å‹™ã‚’è² ã†ã¹ãã§ã‚ã‚‹ã€‚**
ã¨ã—ã¦é€²ã‚ã¦ã„ãã¾ã™ã€‚

# å˜ä¸€è²¬ä»»ã®åŸå‰‡ã‚’ç ´ã£ã¦ã„ã‚‹çŠ¶æ…‹

å˜ä¸€è²¬ä»»ã®åŸå‰‡ã‚’ç ´ã£ã¦ã„ã‚‹çŠ¶æ…‹ã¨ãã®å•é¡Œç‚¹ã‚’ç¤ºã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚
ä¾‹ã®ã”ã¨ã go ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¨ä»Šå›ã¯ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³ã‚’äº¤ãˆã¦è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚

ã¡ã‚‡ã£ã¨è¤‡é›‘ãªä¾‹ã§ç´¹ä»‹ã—ã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³ã¨ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã§ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/8959fb44646fee9540ba9eea.png)

```go:bad.go
package main

import "fmt"

var (
	space = "space"
	water = "water"
)

/*******************************
	utility
*******************************/

type transferR interface {
	transferRed(string, int) int
}

type transferG interface {
	tranferGreen(string, int) int
}

type transferW interface {
	transferWhite(string, int) int
}

type MobileSuit struct {
	weight int
	engine int
	name   string
}

type Gtype struct {
	MobileSuit
}

type Ztype struct {
	MobileSuit
}

// é€Ÿåº¦ç®—å‡º
func (m *MobileSuit) calculateSpeedIndex() float32 {
	return float32(m.engine) / float32(m.weight)
}

// ã‚¶ã‚¯ã‚¿ã‚¤ãƒ—
func (z *Ztype) transferZaku(field string, seconds int) int {
	var transfer int
	switch field {
	case space:
		index := z.calculateSpeedIndex()
		transfer = int(index * 1.2 * float32(seconds))
	case water:
		index := z.calculateSpeedIndex()
		transfer = int(index * .4 * float32(seconds))
	default:
		index := z.calculateSpeedIndex()
		transfer = int(index * float32(seconds))
	}
	return transfer
}

// Gtype ç§»å‹•è·é›¢ç®—å‡º
func (g *Gtype) transferGtype(field string, seconds int) int {
	var transfer int
	switch field {
	case space:
		index := g.calculateSpeedIndex()
		transfer = int(index * 1.2 * float32(seconds))
	case water:
		index := g.calculateSpeedIndex()
		transfer = int(index * .7 * float32(seconds))
	default:
		index := g.calculateSpeedIndex()
		transfer = int(index * float32(seconds))
	}
	return transfer
}

/*******************************
	å…·ä½“çš„ãªå€¤
*******************************/

type red struct {
	Ztype
	transferR
}

type green struct {
	Ztype
	transferG
}

type white struct {
	Gtype
	transferW
}

func (w *white) transferWhite(field string, seconds int) int {
	return w.transferGtype(field, seconds)
}

// ç§»å‹•è·é›¢ç®—å‡º
func (g *green) transferGreen(field string, seconds int) int {
	return g.transferZaku(field, seconds)
}

// ç§»å‹•è·é›¢ç®—å‡º
func (r *red) transferRed(field string, seconds int) int {
	return r.transferZaku(field, seconds)
}

/*******************************
	function
*******************************/

func main() {
	field := space
	white := &white{
		Gtype: Gtype{
			MobileSuit: MobileSuit{
				weight: 43,
				engine: 55,
				name:   "ç™½ã„æ‚ªé­”",
			},
		},
	}
	green := &green{
		Ztype: Ztype{
			MobileSuit: MobileSuit{
				weight: 58,
				engine: 43,
				name:   "ç·‘ã®è„‡å½¹",
			},
		},
	}
	red := &red{
		Ztype: Ztype{
			MobileSuit: MobileSuit{
				weight: 58,
				engine: 43,
				name:   "èµ¤ã„ã®",
			},
		},
	}
	transferWhite := white.transferWhite(field, 200)
	transferGreen := green.transferGreen(field, 200)
	transferRed := red.transferRed(field, 200)
	fmt.Printf(
		"%s: %v, %s: %v, %s: %v",
		white.name, transferWhite, green.name, transferGreen, red.name, transferRed,
	)
}

```

ã©ã†ã§ã—ã‚‡ã†ã‹ï¼Ÿä¸€è¦‹ã™ã‚‹ã¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚‚åˆ†é›¢ã•ã‚Œã¦ã„ã‚‹ã—ä½•ã‚‚å•é¡ŒãŒãªã„æ°—ãŒã—ã¾ã™ã­ã€‚

## æ‚ªã„ä¾‹ã«å¤‰æ›´ã‚’åŠ ãˆã‚‹

ãã‚Œã§ã¯å¤‰æ›´ã‚’åŠ ãˆã¦ã„ãã¾ã—ã‚‡ã†ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ãªãŠè§¦ã‚ŒãŒå‡ºã‚‹ã¨ä»®å®šã—ã¾ã™ã€‚
**èµ¤ã„å½—æ˜Ÿã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³**ã‚’å®Ÿæ–½ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚
ã€Œèµ¤ã„ã®ã€ã®é€Ÿã•ã‚’é€šå¸¸ã® 3 å€ã«ã—ã¾ã™ã€‚

ãã‚Œã‚’å®Ÿè£…ã™ã‚‹éš›ã«ãã®æ‹…å½“ã¨ãªã£ãŸæ–°äºº A æ°ã¯ transferZaku é–¢æ•°ãŒç§»å‹•è·é›¢ã®ç®—å‡ºã«é–¢ã‚ã£ã¦ã„ã‚‹ã“ã¨ã«æ°—ã¥ãã¾ã™ã€‚

ãã“ã§ãã®æ–°äºº A æ°ã¯`return transfer`ã®éƒ¨åˆ†ã‚’
`return transfer * 3`
ã¨ã—ãŸã€‚

ãã†ã™ã‚‹ã¨
