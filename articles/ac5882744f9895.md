---
title: "ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³ã¨SRP(å˜ä¸€è²¬ä»»ã®åŸå‰‡)"
emoji: "ğŸ¦"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [â€œgoâ€, â€œã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£â€œ, â€œã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£â€œ]
published: false
---

# ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³

ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«å‰‡ã‚Šä½œã‚‰ã‚ŒãŸè‡ªåˆ†ã®å€‹äººé–‹ç™ºã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãŒ SRP ã‚’æº€ãŸã—ã¦ã„ã‚‹ã®ã‹ä¸å®‰ã«ãªã‚Šã€ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³ã‚’æ›¸ãã“ã¨ã«ã—ã¾ã—ãŸã€‚ãã®éš›ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç”¨ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³ã‚’æ€ã„ã¤ã„ãŸã®ã§å…±æœ‰ã„ãŸã—ã¾ã™ã€‚
ãŠãã‚‰ãä»–ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç­‰ã§ã‚‚æµç”¨å¯èƒ½ã ã¨æ€ã†ã®ã§ã€æ°—ã«å…¥ã£ãŸã‚‰æ˜¯éä½¿ã£ã¦ã¿ã¦ãã ã•ã„ã€‚
ã‚µãƒ³ãƒ—ãƒ«ã® drawio ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã“ã¡ã‚‰ã§ã™ã€‚
@TODO ãƒ•ã‚¡ã‚¤ãƒ«ã® github url

# å˜ä¸€è²¬ä»»ã®åŸå‰‡ã¨ã¯

å˜ä¸€è²¬ä»»ã®åŸå‰‡ã¨ã¯ä½•ã‹ï¼Ÿ
è‰²ã€…ãªè¨€ã‚ã‚Œæ–¹ã‚’ã—ã¾ã™ã€‚
**ä¸€ã¤ã®é–¢æ•°ã¯ãŸã£ãŸä¸€ã¤ã®ã“ã¨ã‚’è¡Œã†ã¹ã**
**ã‚¯ãƒ©ã‚¹ãŒæ‹…ã†è²¬ä»»ã¯ã€ãŸã£ãŸä¸€ã¤ã«é™å®šã™ã¹ã**
ç­‰
ã“ã‚Œã‚‰ã‚’è¨€ã„æ›ãˆã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¨€ãˆã¾ã™ã€‚
**ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å¤‰æ›´ã™ã‚‹ç†ç”±ã¯ãŸã£ãŸä¸€ã¤ã§ã‚ã‚‹ã¹ã**
ã“ã“ã§æ¯åº¦ãŠãªã˜ã¿ã®ãƒœãƒ–ãŠã˜ã•ã‚“ãŒä»¥ä¸‹ã®ã‚ˆã†ã«è£œè¶³ã—ã¾ã™ã€‚
ã€Œã‚·ã‚¹ãƒ†ãƒ ã®å¤‰æ›´ã£ã¦ã®ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’æº€è¶³ã•ã›ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã—ã‚‡ï¼Ÿãã‚Œã£ã¦ã¤ã¾ã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼è‡ªä½“ãŒ SRP ã®æŒ‡ã—ç¤ºã™ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å¤‰æ›´ã™ã‚‹ç†ç”±ãªã‚“ã˜ã‚ƒãªã„ï¼Ÿã€
ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã®ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ã‚¢ã‚¯ã‚¿ãƒ¼ã¨å‘¼ç§°ã—ãŸã¨ãã«ã“ã‚Œã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¨€ã„æ›ãˆã‚‰ã‚Œã‚‹ã‚“ã˜ã‚ƒãªã„ï¼Ÿã€
**ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ãŸã£ãŸä¸€ã¤ã®ã‚¢ã‚¯ã‚¿ãƒ¼ã«å¯¾ã—ã¦è²¬å‹™ã‚’è² ã†ã¹ãã§ã‚ã‚‹ã€‚**
ãªã‚‹ã»ã©ã€‚å®Œå…¨ã«åˆã£ã¦ã„ã‚‹ã‹ã¯ã‚ã‹ã‚Šã¾ã›ã‚“ãŒã€ä¸€ç†ã‚ã‚Šãã†ã§ã™ã­ã€‚

ä»¥ä¸‹ã“ã®è¨˜äº‹ã§ã¯å˜ä¸€è²¬ä»»åŸå‰‡ã®å®šç¾©ã‚’
**ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ãŸã£ãŸä¸€ã¤ã®ã‚¢ã‚¯ã‚¿ãƒ¼ã«å¯¾ã—ã¦è²¬å‹™ã‚’è² ã†ã¹ãã§ã‚ã‚‹ã€‚**
ã¨ã—ã¦é€²ã‚ã¦ã„ãã¾ã™ã€‚

# å˜ä¸€è²¬ä»»ã®åŸå‰‡ã‚’ç ´ã£ã¦ã„ã‚‹çŠ¶æ…‹

å˜ä¸€è²¬ä»»ã®åŸå‰‡ã‚’ç ´ã£ã¦ã„ã‚‹çŠ¶æ…‹ã¨ãã®å•é¡Œç‚¹ã‚’ç¤ºã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚
ä¾‹ã®ã”ã¨ã go ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¨ä»Šå›ã¯ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³ã‚’äº¤ãˆã¦è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚

ãªã‹ãªã‹ä¾‹ã‚’è€ƒãˆã‚‹ã®ãŒé›£ã—ãã¦ã‚ã¾ã‚Šã„ã„ã‚³ãƒ¼ãƒ‰ã§ãªã„ã®ã¯ã”äº†æ‰¿ãã ã•ã„ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ã« Transfer ã¨ã„ã†ç§»å‹•è·é›¢ç®—å‡ºã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«æ³¨ç›®ã—ã¦ã„ãã¾ã™ã€‚
æ—¢ã«ã‚ã‚‹ç¨‹åº¦ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’çŸ¥ã£ã¦ã„ã‚‹æ–¹ã§ã‚ã‚Œã°å˜ä¸€è²¬ä»»ã®åŸå‰‡ã ã‘ã§ãªãã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®åˆ†é›¢ã«ã‚‚åã—ã¦ã„ã‚‹

```go:bad.go
package main

import "fmt"

var (
	space = "space"
	water = "water"
)

// ç§»å‹•ç®—å‡º
type Transfer interface {
	transferWhite(string, int) int
	transferGreen(string, int) int
	transferRed(string, int) int
}

type MobileSuit struct {
	weight int
	engine int
	name   string
	Transfer
}

// é€Ÿåº¦ç®—å‡º
func (m *MobileSuit) calculateSpeedIndex() float32 {
	return float32(m.engine) / float32(m.weight)
}

// ã‚¶ã‚¯ã‚¿ã‚¤ãƒ—
func (m *MobileSuit) transferZaku(field string, seconds int) int {
	var transfer int
	switch field {
	case space:
		index := m.calculateSpeedIndex()
		transfer = int(index * 1.2 * float32(seconds))
	case water:
		index := m.calculateSpeedIndex()
		transfer = int(index * .4 * float32(seconds))
	default:
		index := m.calculateSpeedIndex()
		transfer = int(index * float32(seconds))
	}
	return transfer
}

// ç™½ã„æ‚ªé­”ç§»å‹•è·é›¢ç®—å‡º
func (m *MobileSuit) transferWhite(field string, seconds int) int {
	var transfer int
	switch field {
	case space:
		index := m.calculateSpeedIndex()
		transfer = int(index * 1.2 * float32(seconds))
	case water:
		index := m.calculateSpeedIndex()
		transfer = int(index * .7 * float32(seconds))
	default:
		index := m.calculateSpeedIndex()
		transfer = int(index * float32(seconds))
	}
	return transfer
}

// ç§»å‹•è·é›¢ç®—å‡º
func (m *MobileSuit) transferGreen(field string, seconds int) int {
	return m.transferZaku(field, seconds)
}

// ç§»å‹•è·é›¢ç®—å‡º
func (m *MobileSuit) transferRed(field string, seconds int) int {
	return m.transferZaku(field, seconds)
}

func main() {
	field := space
	white := &MobileSuit{
		weight: 43,
		engine: 55,
		name:   "ç™½ã„æ‚ªé­”",
	}
	green := &MobileSuit{
		weight: 58,
		engine: 43,
		name:   "ç·‘ã®è„‡å½¹",
	}
	red := &MobileSuit{
		weight: 58,
		engine: 43,
		name:   "èµ¤ã„ã®",
	}
	transferWhite := white.transferWhite(field, 200)
	transferGreen := green.transferGreen(field, 200)
	transferRed := red.transferRed(field, 200)
	fmt.Printf(
		"%s: %v, %s: %v, %s: %v",
		white.name, transferWhite, green.name, transferGreen, red.name, transferRed,
	)
}

```
